<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>GritShot AI - Drop Screenshot and Ask AI</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <main class="main-container">
      <header class="app-header">
        <h1 class="title-header">GritShot AI</h1>
        <p class="title-header-desc">Drop Screenshot and Ask AI</p>

        <div class="notes card hidden" id="instructionsCard">
          <h2 class="hint quick-steps">Quick Steps:</h2>
          <ol class="steps">
            <li>
              <strong>Take a screenshot</strong> by pressing
              <kbd class="kbd">Win+Shift+S</kbd> (Windows) or
              <kbd class="kbd">⌘+Shift+5</kbd> (macOS).
            </li>
            <li>
              <strong>Copy the screenshot</strong> to the clipboard by pressing
              <kbd class="kbd">Ctrl+C</kbd> (Windows) or
              <kbd class="kbd">⌘+C</kbd> (macOS).
            </li>
            <li>
              <strong>Click GritShot AI</strong>, then <strong>Paste</strong> by
              pressing <kbd class="kbd">Ctrl+V</kbd> (Windows) or
              <kbd class="kbd">⌘+V</kbd> (macOS)
            </li>
          </ol>
        </div>
      </header>

      <nav
        class="card tab-container"
        role="tablist"
        aria-label="Main navigation"
      >
        <button
          id="promptTab"
          data-target="panel-1"
          class="tab tab-active"
          role="tab"
          aria-selected="true"
          aria-controls="panel-1"
        >
          <img class="tab-icon" src="./icons/ask_white.svg" alt="Ask AI" />
          <span>Ask AI</span>
        </button>
        <button
          id="settingsTab"
          data-target="panel-2"
          class="tab"
          role="tab"
          aria-selected="false"
          aria-controls="panel-2"
        >
          <img class="tab-icon" src="./icons/setting.svg" alt="Settings" />
          <span>Settings</span>
        </button>
      </nav>

      <section
        id="panel-1"
        class="view"
        role="tabpanel"
        aria-labelledby="promptTab"
      >
        <div class="card form">
          <div class="form-title">
            <img src="./icons/ss.svg" alt="" aria-hidden="true" />
            <h2 class="form-title-text">Screenshot and Ask Anything</h2>
          </div>

          <div class="warning-card hidden" id="notesPanel1">
            <h3>Notes:</h3>
            <p>
              Make sure you have set your <strong>API keys</strong> in the
              <strong>Settings</strong> tab before sending a request.
            </p>
          </div>

          <div class="image-upload-section">
            <div class="dropzone-controls">
              <button
                id="pasteBtn"
                class="btn"
                title="Paste image from clipboard"
              >
                <img src="./icons/paste.svg" alt="Paste" />
                Paste Clipboard
              </button>
              <button
                id="clearBtn"
                class="btn hidden"
                title="Clear current image"
              >
                <img src="./icons/clear.svg" alt="Clear" />
                Clear
              </button>
            </div>

            <div id="dropzone" class="dropzone">
              <div class="dropzone-instructions">
                <p>
                  <strong>Browse</strong> or <strong>Drag &amp; drop</strong> an
                  image here,<br />
                  or <strong>Paste</strong> from clipboard.
                </p>
                <small class="note">Supports PNG, JPG, and JPEG formats.</small>
              </div>
            </div>
            <input
              type="file"
              id="fileInput"
              class="hidden"
              accept="image/png, image/jpeg, image/jpg"
            />

            <div id="dropzonePreview" class="dropzone hidden">
              <img id="preview" class="image-preview" alt="Image preview" />
            </div>

            <div
              id="status-image"
              class="status-message"
              aria-live="polite"
            ></div>
          </div>

          <div class="form-group">
            <label for="prompt">Prompt</label>
            <textarea
              id="prompt"
              placeholder="Briefly describe the image and highlight key points."
              rows="4"
              aria-required="true"
            ></textarea>
          </div>

          <div class="form-actions">
            <button id="analyzeBtn" class="btn-primary btn">
              Send Request
            </button>
          </div>
          <div
            id="validationStatus"
            class="status-message"
            aria-live="polite"
          ></div>
        </div>

        <div class="card response">
          <div class="form-title">
            <img src="./icons/ask_active.svg" alt="" aria-hidden="true" />
            <h2 class="form-title-text">AI Response</h2>
          </div>
          <div class="response-container">
            <div id="answer" class="answer" aria-live="polite">
              No request has been made yet.
            </div>
          </div>
        </div>
      </section>

      <section
        id="panel-2"
        class="card form view hidden"
        role="tabpanel"
        aria-labelledby="settingsTab"
      >
        <div class="form-title">
          <img src="./icons/setting.svg" alt="" aria-hidden="true" />
          <h2 class="form-title-text">Settings</h2>
        </div>

        <div class="warning-card">
          <h3>Security Notice</h3>
          <p id="security-notice">
            Your API keys are stored locally in your browser's storage. Keep
            them secure and don't share them with anyone.
          </p>
          <button class="btn-black btn hidden" id="clearApiKeyBtn">
            Clear API Keys
          </button>
          <span
            id="clearApiKeyStatus"
            class="status-message error"
            aria-live="polite"
          ></span>
        </div>

        <div class="form-group">
          <label for="aiProvider">AI Provider</label>
          <select id="aiProvider">
            <option value="openai">OpenAI</option>
            <option value="gemini">Google Gemini</option>
          </select>
        </div>

        <div id="openaiSettings" class="provider-settings">
          <div class="form-group">
            <label for="apiKeySetting">OpenAI API Key</label>
            <input
              id="apiKeySetting"
              type="password"
              placeholder="sk-..."
              autocomplete="off"
              aria-required="true"
              aria-describedby="security-notice"
            />
          </div>

          <div class="form-group">
            <label for="modelSetting">OpenAI Model</label>
            <select id="modelSetting">
              <option value="gpt-4o-mini">GPT-4o Mini (Vision) - Faster</option>
              <option value="gpt-4o">GPT-4o (Vision) - More Accurate</option>
            </select>
          </div>
        </div>

        <div id="geminiSettings" class="provider-settings hidden">
          <div class="form-group">
            <label for="geminiApiKeySetting">Gemini API Key</label>
            <input
              id="geminiApiKeySetting"
              type="password"
              placeholder="AIza..."
              autocomplete="off"
              aria-required="true"
              aria-describedby="security-notice"
            />
            <small class="note"
              >Get your API key from
              <a href="https://makersuite.google.com/app/apikey" target="_blank"
                >Google AI Studio</a
              ></small
            >
          </div>

          <div class="form-group">
            <label for="geminiModelSetting">Gemini Model</label>
            <select id="geminiModelSetting">
              <option value="gemini-2.0-flash">
                Gemini 2.0 Flash - Faster
              </option>
            </select>
          </div>
        </div>

        <div class="form-group">
          <label for="promptSetting">Default Prompt Template</label>
          <textarea
            id="promptSetting"
            placeholder="Briefly describe the image and highlight key points."
            rows="4"
          ></textarea>
        </div>

        <div class="form-actions">
          <button id="saveBtn" class="btn-primary btn">Save Settings</button>
        </div>
        <div id="statusSetting" class="status-message" aria-live="polite"></div>
      </section>
    </main>

    <script src="lib/marked.min.js"></script>
    <script src="main.js"></script>
  </body>
</html>
